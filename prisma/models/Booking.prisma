model Booking {
  id                 Int                    @id @default(autoincrement())
  hotelId            Int
  roomTypeId         Int
  roomId             Int

  checkInDate        DateTime
  checkOutDate       DateTime
  numAdults          Int
  numChildren        Int

  guestName          String
  guestEmail         String?
  guestPhone         String?

  bookedBy           BookedBy
  status             BookingStatus          @default(Pending)
  statusChangedAt    DateTime?
  statusReason       String?

  baseRoomPrice      Decimal
  roomPriceTotal     Decimal
  hotelAddonsTotal   Decimal
  activityAddonsTotal Decimal
  subtotalPrice      Decimal
  taxTotal           Decimal
  totalDiscount      Decimal
  totalPrice         Decimal

  priceBreakdown     Json
  couponCode         String?

  invoiceNumber      String?
  invoiceUrl         String?

  paymentStatus      BookingPaymentStatus   @default(Pending)

  hotel              Hotel      @relation(fields: [hotelId], references: [id])
  roomType           RoomType   @relation(fields: [roomTypeId], references: [id])
  room               Room       @relation(fields: [roomId], references: [id])

  payments           Payment[]
  createdAt          DateTime   @default(now())
  updatedAt          DateTime   @updatedAt

  @@index([hotelId])
  @@index([roomId])
  @@index([status])
  @@index([paymentStatus])
  @@index([checkInDate, checkOutDate])
}
